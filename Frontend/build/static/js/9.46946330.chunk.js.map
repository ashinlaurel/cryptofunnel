{"version":3,"sources":["components/Typography/PageTitle.js","images/user.png","pages/Payment/UserPaymentHistory.js"],"names":["PageTitle","children","className","UserPaymentHistory","useState","page","setPage","data","setData","refresh","setRefresh","searchquery","setSearchQuery","fromDate","setFromDate","toDate","setToDate","totalResults","setTotalResults","useEffect","a","console","log","role","UserProfile","getRole","passCustId","getId","payload","pages","limit","filters","plan","customerId","axios","url","API","method","response","out","total","class","onChange","e","value","disabled","selected","xmlns","viewBox","d","onSubmit","preventDefault","target","placeholder","type","map","user","i","src","UserPng","alt","name","email","Date","createdAt","toLocaleDateString","refCode","paymentStatus","curr","parseInt","amountTotal","planName","resultsPerPage","label","p"],"mappings":"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","file":"static/js/9.46946330.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nfunction PageTitle({ children }) {\r\n  return (\r\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\r\n  )\r\n}\r\n\r\nexport default PageTitle\r\n","export default __webpack_public_path__ + \"static/media/user.55758720.png\";","import React, { useState, useEffect } from \"react\";\r\n\r\nimport PageTitle from \"../../components/Typography/PageTitle\";\r\nimport UserProfile from \"../../helper/auth/UserProfile\";\r\nimport UserPng from \"../../images/user.png\";\r\n\r\nimport {\r\n  TableBody,\r\n  TableContainer,\r\n  Table,\r\n  TableHeader,\r\n  TableCell,\r\n  TableRow,\r\n  TableFooter,\r\n  Avatar,\r\n  Badge,\r\n  Pagination,\r\n} from \"@windmill/react-ui\";\r\n\r\nimport axios from \"axios\";\r\nimport { API } from \"../../backend\";\r\n\r\nfunction UserPaymentHistory() {\r\n  const [page, setPage] = useState(1);\r\n  const [data, setData] = useState([]);\r\n  const [tempcode, setTempCode] = useState(\"\");\r\n  const [refresh, setRefresh] = useState(true);\r\n  const [searchquery, setSearchQuery] = useState(\"\");\r\n  const [fromDate, setFromDate] = useState(\"\");\r\n  const [toDate, setToDate] = useState(\"\");\r\n\r\n  // pagination setup\r\n  const resultsPerPage = 10;\r\n  const [totalResults, setTotalResults] = useState(20);\r\n\r\n  // pagination change control\r\n  function onPageChange(p) {\r\n    setPage(p);\r\n  }\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  function openModal() {\r\n    setIsModalOpen(true);\r\n  }\r\n\r\n  function closeModal() {\r\n    setIsModalOpen(false);\r\n  }\r\n\r\n  // on page change, load new sliced data\r\n  // here you would make another server request for new data\r\n\r\n  useEffect(() => {\r\n    // Using an IIFE\r\n    (async function thegetter() {\r\n      console.log(\"getter called\");\r\n      const role = UserProfile.getRole();\r\n      let passCustId = \"\";\r\n      if (role != 1) {\r\n        passCustId = UserProfile.getId();\r\n      }\r\n      let payload = {\r\n        pages: {\r\n          page: page,\r\n          limit: resultsPerPage,\r\n        },\r\n        filters: {\r\n          searchquery: searchquery,\r\n          plan: \"\",\r\n          customerId: passCustId,\r\n          fromDate: fromDate,\r\n          toDate: toDate,\r\n        },\r\n      };\r\n\r\n      try {\r\n        let response = await axios({\r\n          url: `${API}/payment/${UserProfile.getId()}/getAllPayHistory`,\r\n          method: \"POST\",\r\n          data: payload,\r\n        });\r\n        console.log(response.data.out);\r\n        setTotalResults(response.data.total);\r\n\r\n        setData(response.data.out);\r\n      } catch (error) {\r\n        throw error;\r\n      }\r\n    })();\r\n    // setData(response.slice((page - 1) * resultsPerPage, page * resultsPerPage));\r\n  }, [page, searchquery, refresh, fromDate, toDate]);\r\n\r\n  return (\r\n    <>\r\n      <PageTitle>Payment History</PageTitle>\r\n\r\n      {/* <CTA /> */}\r\n\r\n      <div className=\"mb-4\">\r\n        {/* -------------------------------------Row 1 ------------------------------------------------------------------------------- */}\r\n        <div class=\"my-2 flex sm:flex-row flex-col items-start sm:items-center sm:justify-left h-full xl:space-x-2 \">\r\n          {/* ---------------------------Condition Drop Down-------------------------------------- */}\r\n          <div class=\"relative mx-1 \">\r\n            <select\r\n              class=\" shadow-md h-full rounded border block appearance-none w-full bg-white border-gray-400 text-gray-700 py-1 xl:py-2  xl: px-4  leading-tight focus:outline-none   focus:bg-white focus:border-gray-500\"\r\n              // value={condition}\r\n              onChange={(e) => {\r\n                // setCondition(e.target.value);\r\n              }}\r\n            >\r\n              <option value=\"\" disabled selected>\r\n                Plan\r\n              </option>\r\n              <option value=\"\">All</option>\r\n              <option value=\"\">No Plan</option>\r\n              <option value=\"Good\">Gold</option>\r\n              <option value=\"Bad\">Silver</option>\r\n              <option value=\"Used\">Bronze</option>\r\n            </select>\r\n\r\n            <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n              <svg\r\n                class=\"fill-current h-4 w-4\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 20 20\"\r\n              >\r\n                <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n\r\n          {/* -----------------Search Bar------------------------------------ */}\r\n          <div class=\"block relative xl:ml-64 mt-2 xl:mt-0 ml-1\">\r\n            <span class=\"h-full absolute inset-y-0 left-0 flex items-center pl-2\">\r\n              <svg\r\n                viewBox=\"0 0 24 24\"\r\n                class=\"h-4 w-4 fill-current text-gray-500\"\r\n              >\r\n                <path d=\"M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z\"></path>\r\n              </svg>\r\n            </span>\r\n            <form\r\n              onSubmit={(e) => {\r\n                e.preventDefault();\r\n                setRefresh(!refresh);\r\n              }}\r\n            >\r\n              <input\r\n                value={searchquery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                placeholder=\"Search\"\r\n                class=\"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block py-1 px-8  xl:pl-8 xl:pr-6 xl:py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\r\n              />\r\n            </form>\r\n          </div>\r\n\r\n          <label className=\"text-gray-700 -mt-3 mb-2 text-sm\">\r\n            <span>From Date</span>\r\n            <input\r\n              class=\"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\r\n              type=\"date\"\r\n              value={fromDate}\r\n              onChange={(e) => setFromDate(e.target.value)}\r\n            />\r\n          </label>\r\n          <label className=\"text-gray-700 -mt-3  mb-1 text-sm\">\r\n            <span>To Date</span>\r\n            <input\r\n              class=\"shadow-md z-20 appearance-none rounded border border-gray-400 border-b block pl-8 pr-6 py-2 w-full bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none\"\r\n              type=\"date\"\r\n              value={toDate}\r\n              onChange={(e) => setToDate(e.target.value)}\r\n            />\r\n          </label>\r\n\r\n          {/* <div class=\"block relative xl:ml-64\">\r\n            <Button\r\n              layout=\"outline\"\r\n              onClick={() => {\r\n                // setIsDwnldModalOpen(true);\r\n              }}\r\n            >\r\n              Download Database\r\n            </Button>\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n\r\n      <TableContainer>\r\n        <Table>\r\n          <TableHeader>\r\n            <tr>\r\n              <TableCell>User</TableCell>\r\n              <TableCell>Date</TableCell>\r\n              <TableCell>Code</TableCell>\r\n              <TableCell>Status</TableCell>\r\n              <TableCell>Amount</TableCell>\r\n              <TableCell>Plan</TableCell>\r\n            </tr>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {data.map((user, i) => (\r\n              <TableRow key={i}>\r\n                <TableCell>\r\n                  <div className=\"flex items-center text-sm\">\r\n                    <Avatar\r\n                      className=\"hidden mr-3 md:block\"\r\n                      src={UserPng}\r\n                      alt=\"User image\"\r\n                    />\r\n                    <div>\r\n                      <p className=\"font-semibold\">{user.customerId.name}</p>\r\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">\r\n                        {user.customerId.email}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <p className=\"font-semibold text-sm\">\r\n                    {new Date(user.createdAt).toLocaleDateString()}\r\n                  </p>\r\n                </TableCell>\r\n\r\n                <TableCell>\r\n                  <Badge className=\"text-sm \">\r\n                    {user.refCode == \"\" ? \"Nil\" : user.refCode}\r\n                  </Badge>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Badge className=\"text-sm \">{user.paymentStatus}</Badge>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <span className=\"text-sm font-bold\">\r\n                    {user.curr == \"inr\" ? \"â‚¹ \" : \"$\"}\r\n                    {parseInt(user.amountTotal) / 100}\r\n                  </span>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <span className=\"text-sm   \">{user.planName}</span>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n        <TableFooter>\r\n          <Pagination\r\n            totalResults={totalResults}\r\n            resultsPerPage={resultsPerPage}\r\n            label=\"Table navigation\"\r\n            onChange={onPageChange}\r\n          />\r\n        </TableFooter>\r\n      </TableContainer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserPaymentHistory;\r\n"],"sourceRoot":""}