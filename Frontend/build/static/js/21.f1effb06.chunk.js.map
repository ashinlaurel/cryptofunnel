{"version":3,"sources":["pages/ForgotPassword/ForgotPasswordReset.js"],"names":["ForgotPasswordReset","token","useParams","useState","newpass","setNewpass","newpassconf","setNewpassconf","setPasserror","messageModal","setMessageModal","modalMessage","setModalMessage","issuccModal","setIssuccModal","history","useHistory","resetPass","a","payload","pass","axios","post","API","headers","Authorization","console","log","useEffect","className","isOpen","onClose","onClick","push","type","value","onChange","e","target","placeholder","resetPasswordvalue"],"mappings":"wNAuJeA,UA5Ia,WAC1B,IAAQC,EAAUC,cAAVD,MACR,EAA8BE,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAsCF,mBAAS,IAA/C,mBAAOG,EAAP,KAAoBC,EAApB,KACA,EAAkCJ,mBAAS,IAA3C,mBAAkBK,GAAlB,WACA,EAAwCL,oBAAS,GAAjD,mBAAOM,EAAP,KAAqBC,EAArB,KACA,EAAwCP,mBAAS,IAAjD,mBAAOQ,EAAP,KAAqBC,EAArB,KACA,EAAoCT,oBAAS,GAA7C,mBACA,GADA,UACsCA,oBAAS,IAA/C,mBAAOU,EAAP,KAAoBC,EAApB,KAEIC,EAAUC,cAERC,EAAS,uCAAG,4BAAAC,EAAA,sEAERC,EAAU,CAAEC,KAAMhB,GAFV,SAGSiB,IAAMC,KAAN,UAClBC,IADkB,8BAErBJ,EACA,CACEK,QAAS,CACPC,cAAc,UAAD,OAAYxB,MARjB,cAcda,GAAe,GAdD,gDAgBdY,QAAQC,IAAI,eAAZ,MACAf,EAAgB,4BAChBF,GAAgB,GAlBF,yDAAH,qDAqBfkB,qBAAU,cAGP,IACH,MAA8BzB,mBAAS,cAAvC,6BAoGA,OAAO,mCAxDH,sBAAK0B,UAAU,4DAAf,UAxCA,mCACE,eAAC,QAAD,CAAOC,OAAQrB,EAAcsB,QAAS,kBAAMrB,GAAgB,IAA5D,UACE,cAAC,cAAD,UAAcC,IACd,cAAC,YAAD,IACA,cAAC,cAAD,UACE,cAAC,SAAD,CACEkB,UAAU,mBACVG,QAAS,kBAAMtB,GAAgB,IAFjC,0BAcN,mCACE,eAAC,QAAD,CAAOoB,OAAQjB,EAAakB,QAAS,kBAAMjB,GAAe,IAA1D,UACE,cAAC,cAAD,0CACA,cAAC,YAAD,IACA,cAAC,cAAD,UACE,cAAC,SAAD,CACEe,UAAU,mBACVG,QAAS,WACPjB,EAAQkB,KAAK,YAHjB,sCAmBJ,qBAAKJ,UAAU,0FAAf,SACE,sBAAKA,UAAU,0DAAf,UACE,qBAAKA,UAAU,UAAf,4BACA,8BACE,sBAAKA,UAAU,wDAAf,UACE,kCACE,gDACA,uBACEA,UAAU,6DACVK,KAAK,WACLC,MAAO/B,EACPgC,SAAU,SAACC,GAAD,OAAOhC,EAAWgC,EAAEC,OAAOH,QACrCI,YAAY,oBAEP,IACT,kCACE,oDACA,uBACEV,UAAU,6DACVK,KAAK,WACLK,YAAY,mBACZC,mBAAoBlC,EACpB8B,SAAU,SAACC,GACT9B,EAAe8B,EAAEC,OAAOH,OACpBE,EAAEC,OAAOH,OAAS/B,EACpBI,EAAa,2BACVA,EAAa,eAM5B,8BACE,cAAC,SAAD,CACEqB,UAAU,wBACVG,QAAS,WACP,GAAI5B,IAAYE,EAGd,OAFAM,EAAgB,+BAChBF,GAAgB,GAGlBO,KARJ","file":"static/js/21.f1effb06.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Button, Input, HelperText, Label } from \"@windmill/react-ui\";\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from \"@windmill/react-ui\";\r\n\r\nimport { API } from \"../../backend\";\r\nimport axios from \"axios\";\r\n//  CHANGE EMIAL LINKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK\r\nconst ForgotPasswordReset = () => {\r\n  const { token } = useParams();\r\n  const [newpass, setNewpass] = useState(\"\");\r\n  const [newpassconf, setNewpassconf] = useState(\"\");\r\n  const [passerror, setPasserror] = useState(\"\");\r\n  const [messageModal, setMessageModal] = useState(false);\r\n  const [modalMessage, setModalMessage] = useState(\"\");\r\n  const [resetModal, setResetModal] = useState(false);\r\n  const [issuccModal, setIssuccModal] = useState(false);\r\n  // console.log(\"toekn\", token);\r\n  let history = useHistory();\r\n\r\n  const resetPass = async () => {\r\n    try {\r\n      const payload = { pass: newpass };\r\n      const response = await axios.post(\r\n        `${API}/mail/resetpasswordbytoken`,\r\n        payload,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      // console.log(\"suss\", response.data);\r\n      // setModalMessage(\"Email verified successfully.\");\r\n      setIssuccModal(true);\r\n    } catch (err) {\r\n      console.log(\"VERIFY ERROR\", err);\r\n      setModalMessage(\"Sorry, an error occured.\");\r\n      setMessageModal(true);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    // VERIFY EMAIL\r\n    // resetPass();\r\n  }, []);\r\n  const [message, setMessage] = useState(\"Loading...\");\r\n\r\n  const messageModalComponent = () => {\r\n    return (\r\n      <>\r\n        <Modal isOpen={messageModal} onClose={() => setMessageModal(false)}>\r\n          <ModalHeader>{modalMessage}</ModalHeader>\r\n          <ModalBody></ModalBody>\r\n          <ModalFooter>\r\n            <Button\r\n              className=\"w-full sm:w-auto\"\r\n              onClick={() => setMessageModal(false)}\r\n            >\r\n              Okay!\r\n            </Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const resetSuccessfullModal = () => {\r\n    return (\r\n      <>\r\n        <Modal isOpen={issuccModal} onClose={() => setIssuccModal(false)}>\r\n          <ModalHeader>Password Reset Successfully</ModalHeader>\r\n          <ModalBody></ModalBody>\r\n          <ModalFooter>\r\n            <Button\r\n              className=\"w-full sm:w-auto\"\r\n              onClick={() => {\r\n                history.push(\"/signin\");\r\n              }}\r\n            >\r\n              Login to continue\r\n            </Button>\r\n          </ModalFooter>\r\n        </Modal>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const loginForm = () => {\r\n    return (\r\n      <div className=\"flex items-center min-h-screen p-6 bg-gray-50 bg-gray-900\">\r\n        {messageModalComponent()}\r\n        {resetSuccessfullModal()}\r\n        <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-gray-900  shadow-xl dark:bg-gray-800\">\r\n          <div className=\" overflow-y-auto md:flex-row  text-white  font-semibold\">\r\n            <div className=\"text-xl\">Reset Password</div>\r\n            <div>\r\n              <div className=\"px-4 py-3 mb-8  rounded-lg shadow-md dark:bg-gray-800\">\r\n                <label>\r\n                  <span>New Password</span>\r\n                  <input\r\n                    className=\"w-full px-2 py-1 text-sm text-gray-700 bg-gray-200 rounded\"\r\n                    type=\"password\"\r\n                    value={newpass}\r\n                    onChange={(e) => setNewpass(e.target.value)}\r\n                    placeholder=\"New Password\"\r\n                  />\r\n                </label>{\" \"}\r\n                <label>\r\n                  <span>Confirm Password</span>\r\n                  <input\r\n                    className=\"w-full px-2 py-1 text-sm text-gray-700 bg-gray-200 rounded\"\r\n                    type=\"password\"\r\n                    placeholder=\"Confirm Password\"\r\n                    resetPasswordvalue={newpassconf}\r\n                    onChange={(e) => {\r\n                      setNewpassconf(e.target.value);\r\n                      if (e.target.value != newpass)\r\n                        setPasserror(\"Passwords do not match!\");\r\n                      else setPasserror(\"\");\r\n                    }}\r\n                  />\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <Button\r\n                className=\" m-2 w-full sm:w-auto\"\r\n                onClick={() => {\r\n                  if (newpass !== newpassconf) {\r\n                    setModalMessage(\"Passwords do not match\");\r\n                    setMessageModal(true);\r\n                    return;\r\n                  }\r\n                  resetPass();\r\n                }}\r\n              >\r\n                Change Password\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return <>{loginForm()}</>;\r\n};\r\n\r\nexport default ForgotPasswordReset;\r\n"],"sourceRoot":""}