{"version":3,"sources":["components/Typography/PageTitle.js","pages/User/UserInfo.js"],"names":["PageTitle","children","className","UserInfo","useHistory","useParams","id","useState","PasswordModalOpen","setPasswordModalOpen","isReviewModalOpen","setIsReviewModalOpen","newpass","setNewpass","newpassconf","setNewpassconf","passerror","setPasserror","employeeID","username","email","customerName","address","district","state","locationType","pincode","GSTnumber","contactPerson","contactNo","altContact","WhatsappNo","role","parentCustomerId","show_password","values","setValues","name","enc_password","confpassword","changePassword","a","data","UserProfile","getId","pass","Axios","url","API","method","user","console","log","getCustomerInfo","res","useEffect","isOpen","onClose","type","value","onChange","e","target","placeholder","valid","onClick","employeeName","getName","phone","city","country","zip"],"mappings":"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","file":"static/js/15.085ffa35.chunk.js","sourcesContent":["import React from 'react'\n\nfunction PageTitle({ children }) {\n  return (\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\n  )\n}\n\nexport default PageTitle\n","import React, { useEffect, useState } from \"react\";\nimport { useParams, Link, useHistory } from \"react-router-dom\";\nimport { API } from \"../../backend\";\nimport {\n  Card,\n  CardBody,\n  Input,\n  HelperText,\n  Label,\n  Button,\n  Badge,\n  Select,\n} from \"@windmill/react-ui\";\nimport PageTitle from \"../../components/Typography/PageTitle\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from \"@windmill/react-ui\";\nimport Axios from \"axios\";\nimport UserProfile from \"../../helper/auth/UserProfile\";\n\nexport default function UserInfo() {\n  let history = useHistory();\n  const { id } = useParams();\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [PasswordModalOpen, setPasswordModalOpen] = useState(false);\n  const [isReviewModalOpen, setIsReviewModalOpen] = useState(false);\n  const [newpass, setNewpass] = useState(\"\");\n  const [newpassconf, setNewpassconf] = useState(\"\");\n  const [passerror, setPasserror] = useState(\"\");\n\n  // console.log(id);\n  const [values, setValues] = useState({\n    //both\n    employeeID: \"\",\n    username: \"\",\n    email: \"\",\n    // password: \"\",\n    // confpassword: \"\",\n    //customer\n    customerName: \"\",\n    // accountId: [],\n    //account\n    // accountName: \"\",\n    // unitId: [],\n    // //------> customerName from above\n    address: \"\",\n    district: \"\",\n    state: \"\",\n    locationType: \"\",\n    pincode: \"\",\n    GSTnumber: \"\",\n    contactPerson: \"\",\n    contactNo: \"\",\n    altContact: \"\",\n    WhatsappNo: \"\",\n    role: 0,\n    parentCustomerId: \"\",\n    show_password: \"\",\n  });\n  const [err, setErr] = useState({\n    email: \"\",\n    name: \"\",\n    // accountName: \"\",\n    enc_password: \"\",\n    confpassword: \"\",\n  });\n\n  const changePassword = async () => {\n    let data = { id: UserProfile.getId(), pass: newpass };\n    try {\n      let user = await Axios({\n        url: `${API}/${UserProfile.getId()}/resetpassword`,\n        method: \"POST\",\n        data: data,\n      });\n      setIsReviewModalOpen(true);\n      setPasswordModalOpen(false);\n      console.log(\"Done\", user);\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  const getCustomerInfo = async () => {\n    // console.log(`getting customer info`, UserProfile.getId());\n    let data = { id: UserProfile.getId() };\n    // console.log(API);\n    try {\n      let res = await Axios({\n        url: `${API}/userinfo`,\n        method: \"POST\",\n        data: data,\n      });\n      // calc age\n\n      //   setValues({\n\n      //   });\n\n      console.log(\"Done\", res.data);\n      setValues(res.data[0]);\n      //   console.log(\"Hello\");\n    } catch (error) {\n      console.log(`error`, error);\n    }\n  };\n\n  useEffect(() => {\n    getCustomerInfo();\n  }, []);\n\n  const ResetPassModal = () => {\n    return (\n      <>\n        <Modal\n          isOpen={PasswordModalOpen}\n          onClose={() => setPasswordModalOpen(false)}\n        >\n          <ModalHeader>Change Password for {values.username}!</ModalHeader>\n          <ModalBody>\n            <div className=\"px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n              <Label>\n                <span>New Password</span>\n                <Input\n                  className=\"mt-5\"\n                  type=\"password\"\n                  value={newpass}\n                  onChange={(e) => setNewpass(e.target.value)}\n                  placeholder=\"New Password\"\n                />\n              </Label>{\" \"}\n              <Label>\n                <span>Confirm Password</span>\n                <Input\n                  className=\"my-5\"\n                  type=\"password\"\n                  placeholder=\"Confirm Password\"\n                  value={newpassconf}\n                  onChange={(e) => {\n                    setNewpassconf(e.target.value);\n                    if (e.target.value != newpass)\n                      setPasserror(\"Passwords do not match!\");\n                    else setPasserror(\"\");\n                  }}\n                />\n              </Label>\n              <HelperText valid={false}>{passerror}</HelperText>\n            </div>\n          </ModalBody>\n          <ModalFooter>\n            <Button\n              className=\"w-full sm:w-auto\"\n              onClick={() => {\n                if (newpass !== newpassconf) return;\n                changePassword();\n              }}\n            >\n              Change Password\n            </Button>\n          </ModalFooter>\n        </Modal>\n      </>\n    );\n  };\n\n  const PassChangeModal = () => {\n    return (\n      <>\n        <Modal\n          isOpen={isReviewModalOpen}\n          onClose={() => setIsReviewModalOpen(false)}\n        >\n          <ModalHeader>Password Updated Successfully!</ModalHeader>\n          <ModalBody></ModalBody>\n          <ModalFooter>\n            <Button\n              className=\"w-full sm:w-auto\"\n              onClick={() => setIsReviewModalOpen(false)}\n            >\n              Okay!\n            </Button>\n          </ModalFooter>\n        </Modal>\n      </>\n    );\n  };\n\n  return (\n    <div>\n      {ResetPassModal()}\n      {PassChangeModal()}\n      <PageTitle>Profile Information {values.employeeName}</PageTitle>\n\n      {/* <SectionTitle> </SectionTitle> */}\n      <Card className=\"mb-8 shadow-md\">\n        <CardBody>\n          <div className=\"flex flex-row flex-wrap \">\n            <div className=\"w-1/2\">\n              <p className=\"text-lg  text-gray-800 dark:text-gray-100\">\n                <span className=\"font-semibold\"> Personal Information</span>{\" \"}\n              </p>\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> Name:</span>{\" \"}\n                {UserProfile.getName()}\n              </p>\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> Email:</span> {values.email}\n              </p>\n\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> Phone:</span> {values.phone}\n              </p>\n            </div>\n            <div className=\" w-1/2\">\n              <p className=\"text-lg  text-gray-800 dark:text-gray-100\">\n                <span className=\"font-semibold\"> Contact Information</span>{\" \"}\n              </p>\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> Address:</span>{\" \"}\n                {values.address}\n              </p>\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> City:</span> {values.city}\n              </p>\n\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> State:</span> {values.state}\n              </p>\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> Country:</span>{\" \"}\n                {values.country}\n              </p>\n              <p className=\"text-md text-gray-700 dark:text-gray-100 py-2\">\n                <span className=\"font-semibold\"> Zip:</span> {values.zip}\n              </p>\n            </div>\n          </div>\n          <div className=\"my-10\">\n            {/* <Link to={`/app/employee/${id}/update`}>\n              <Button className=\"mr-3\">Update Info</Button>\n            </Link>\n            <Link to={`/app/employee/${id}/viewsalary`}>\n              <Button className=\"mr-3\">Payment History</Button>\n            </Link> */}\n            <Button className=\"\" onClick={() => setPasswordModalOpen(true)}>\n              Reset Password\n            </Button>\n\n            {/* <Button className=\"mx-3\">Delete Customer</Button> */}\n          </div>\n        </CardBody>\n      </Card>\n    </div>\n  );\n}\n"],"sourceRoot":""}